(()=>{"use strict";var e,t=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].reverse(),n=document.querySelector(".elements"),o=document.querySelector(".popup_zoom-picture"),r=document.querySelector(".popup__zoom-pic"),c=document.querySelector(".popup__zoom-title"),u=document.querySelector(".popup_form_edit-profile"),i=document.querySelector(".popup_form_new-place"),s=document.querySelector(".popup_profile-edit"),a=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),d=document.querySelector("#name"),p=document.querySelector("#description"),m=document.querySelector(".popup_place-add"),_=document.querySelector(".popup_form_new-place"),v=document.querySelector(".page"),y=Array.from(document.querySelectorAll(".popup")),f=document.querySelector(".popup_edit_avatar"),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;t?(e.classList.remove(n.inactiveButtonClass),e.disabled=!1):(e.classList.add(n.inactiveButtonClass),e.disabled="disabled")};function q(e){e.classList.add("popup_opened")}function k(e){e.classList.remove("popup_opened")}function E(e){var t=document.querySelector(".popup_opened");"Escape"===e.key&&t&&k(t)}function L(e){var t=document.querySelector("#new-mesto").content.querySelector(".mesto").cloneNode(!0);t.querySelector(".mesto__title").textContent=e.name,t.querySelector(".mesto__image").src=e.link,t.querySelector(".mesto__image").alt=e.name,n.prepend(t),t.querySelector(".mesto__image").addEventListener("click",(function(){q(o),r.src=e.link,c.textContent=e.name,r.alt=e.name,v.addEventListener("keydown",E)})),o.querySelector(".popup__button_status_zoom-close").addEventListener("click",(function(){k(o),v.removeEventListener("keydown",E)})),t.querySelector(".mesto__delete").addEventListener("click",(function(){t.classList.add("mesto_hidden")})),t.querySelector(".mesto__button").addEventListener("click",(function(e){e.target.classList.toggle("mesto__button_active")}))}e={formSelector:".popup__container",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_state_inactive",inputErrorClass:"popup__item_state_invalid",customMessages:{urlMismatch:"Введите адрес сайта",missedInput:"Вы пропустили это поле"}},Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(n){n.addEventListener("input",(function(){!function(e,t,n){e.setCustomValidity("");var o=e.validity.valid,r=t.querySelector("#".concat(e.id,"-error"));!function(e,t){"url"!==e.type&&!e.validity.valueMissing||e.validity.valid||(e.validity.valueMissing?e.setCustomValidity(t.customMessages.missedInput):e.setCustomValidity(t.customMessages.urlMismatch))}(e,n),o?function(e,t,n){t.classList.remove(n.inputErrorClass),e.textContent=t.validationMessage}(r,e,n):function(e,t,n){t.classList.add(n.inputErrorClass),e.textContent=t.validationMessage}(r,e,n)}(n,e,t),S(o,e.checkValidity(),t)}))})),e.addEventListener("submit",(function(e){e.preventDefault(),S(o,!1,t)}))}(t,e)})),t.forEach((function(e){L(e)})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){var e;q(u),e=u,Array.from(e.querySelectorAll(".popup__item-error")).forEach((function(e){e.textContent=""})),d.value=a.textContent,p.value=l.textContent,v.addEventListener("keydown",E)})),u.querySelector(".popup__button_status_close").addEventListener("click",(function(){k(u),v.removeEventListener("keydown",E)})),document.querySelector(".profile__add-button").addEventListener("click",(function(){q(i),v.addEventListener("keydown",E)})),i.querySelector(".popup__button_status_close").addEventListener("click",(function(){k(i),v.removeEventListener("keydown",E)})),s.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=d.value,l.textContent=p.value,k(u),v.removeEventListener("keydown",E)})),m.addEventListener("submit",(function(e){var t,n;e.preventDefault(),t=document.querySelector(".popup__item_el_place-name"),L({link:(n=document.querySelector(".popup__item_el_place-url")).value,name:t.value}),n.value="",t.value="",k(_),v.removeEventListener("keydown",E)})),y.forEach((function(e){e.addEventListener("click",(function(e){document.querySelector(".popup_opened")&&e.target.classList.contains("popup")&&k(e.target.closest(".popup_opened"))}))})),document.querySelector(".profile_avatar-button").addEventListener("click",(function(){q(f),v.addEventListener("keydown",E)})),f.querySelector(".popup__button_status_close").addEventListener("click",(function(){k(f),v.removeEventListener("keydown",E)}))})();